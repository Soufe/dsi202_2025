{% extends 'base.html' %}
{% load static %}
{% block title %}‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | PLOOKJING{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto p-6 space-y-10">
  <h1 class="text-3xl font-bold text-green-800 mb-6">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>

  <!-- üå≥ ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ -->
  <div>
    <h2 class="text-xl font-semibold text-green-700 mb-3">‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ</h2>
    {% if tree_items %}
      <div class="space-y-4">
        {% for item in tree_items %}
          <div class="flex items-center justify-between bg-white p-4 rounded-xl shadow">
            <div class="flex items-center gap-4">
              {% if item.image %}
                <img src="{{ item.image }}" alt="{{ item.name }}"
                     class="w-20 h-20 object-cover rounded-lg border">
              {% else %}
                <div class="w-20 h-20 bg-gray-100 text-gray-400 flex items-center justify-center rounded-lg">
                  ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ
                </div>
              {% endif %}
              <div>
                <p class="font-semibold text-gray-800">{{ item.name }}</p>
                <p class="text-sm text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {{ item.quantity }}</p>
                <p class="text-orange-600 font-bold">‡∏ø{{ item.price|floatformat:2 }}</p>
              </div>
            </div>
            <div class="flex flex-col items-end gap-2">
              <a href="{% url 'myapp:tree_order' item.id %}"
                 class="px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600 shadow">
                ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
              </a>
              <form method="POST" action="{% url 'myapp:update_quantity' item.id %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="remove">
                <button type="submit" class="text-xs text-red-400 hover:text-red-600">‡∏•‡∏ö</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
    {% endif %}
  </div>

  <!-- üõ† ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå -->
  <div>
    <h2 class="text-xl font-semibold text-green-700 mb-3">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h2>
    {% if equipment_items %}
      <div class="space-y-4">
        {% for item in equipment_items %}
          <div class="flex items-center justify-between bg-white p-4 rounded-xl shadow">
            <div class="flex items-center gap-4">
              {% if item.image %}
                <img src="{{ item.image }}" alt="{{ item.name }}"
                     class="w-20 h-20 object-cover rounded-lg border">
              {% else %}
                <div class="w-20 h-20 bg-gray-100 text-gray-400 flex items-center justify-center rounded-lg">
                  ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ
                </div>
              {% endif %}
              <div>
                <p class="font-semibold text-gray-800">{{ item.name }}</p>
                <p class="text-sm text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {{ item.quantity }}</p>
                <p class="text-orange-600 font-bold">‡∏ø{{ item.price|floatformat:2 }}</p>
              </div>
            </div>
            <div class="flex flex-col items-end gap-2">
              <form method="POST" action="{% url 'myapp:update_quantity' item.id %}">
                {% csrf_token %}
                <input type="hidden" name="action" value="remove">
                <button type="submit" class="text-xs text-red-400 hover:text-red-600">‡∏•‡∏ö</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
    {% endif %}
  </div>
</div>
{% endblock %}