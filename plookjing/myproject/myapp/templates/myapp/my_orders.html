{% extends 'base.html' %}
{% load static %}

{% block title %}‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô | PLOOKJING{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto mt-10 px-4 font-prompt">
  <h1 class="text-3xl font-bold text-green-700 mb-6">üì¶ ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</h1>

  <!-- üîç ‡πÅ‡∏ñ‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏£‡∏≠‡∏á -->
  <div class="flex gap-4 mb-6">
    {% for status in status_choices %}
      <a href="?status={{ status }}" class="px-4 py-2 rounded-full border 
         {% if selected_status == status %}
           bg-green-600 text-white font-semibold
         {% else %}
           border-green-300 text-green-600 hover:bg-green-100
         {% endif %}
       ">
        {{ status }}
      </a>
    {% endfor %}
  </div>

  {% if orders %}
    {% for order in orders %}
      <div class="bg-white shadow rounded-xl p-6 mb-6 border border-green-100">
        <div class="flex justify-between items-center mb-4">
          <div>
            <p class="text-sm text-gray-500">‡∏£‡∏´‡∏±‡∏™‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: <span class="font-medium">{{ order.id }}</span></p>
            <p class="text-sm text-gray-500">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: {{ order.created_at|date:"Y-m-d H:i" }}</p>
          </div>
          <div>
            <span class="px-3 py-1 text-sm rounded-full
              {% if order.status == 'pending' %}
                bg-yellow-100 text-yellow-800
              {% elif order.status == 'verifying' %}
                bg-blue-100 text-blue-800
              {% elif order.status == 'confirmed' %}
                bg-green-100 text-green-800
              {% elif order.status == 'shipping' %}
                bg-indigo-100 text-indigo-800
              {% elif order.status == 'delivered' %}
                bg-emerald-100 text-emerald-800
              {% else %}
                bg-gray-200 text-gray-600
              {% endif %}
            ">
              {{ order.get_status_display }}
            </span>
          </div>
        </div>

        <!-- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
        <div class="flex items-center gap-4 mb-4">
          {% if order.equipment.image %}
            <img src="{{ order.equipment.image.url }}" alt="{{ order.equipment.name }}" class="w-20 h-20 object-cover rounded border">
          {% else %}
            <div class="w-20 h-20 flex items-center justify-center bg-gray-100 text-gray-500 border rounded">
              No Image
            </div>
          {% endif %}
          <div class="flex-1">
            <p class="text-green-800 font-semibold">{{ order.equipment.name }}</p>
            <p class="text-gray-500 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {{ order.quantity }}</p>
          </div>
          <div class="text-right text-green-600 font-semibold">
            ‡∏ø{{ order.total_price|floatformat:2 }}
          </div>
        </div>

      </div>
    {% endfor %}
  {% else %}
    <p class="text-center text-gray-400 mt-10">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ</p>
  {% endif %}
</div>
{% endblock %}
